<!DOCTYPE html>
<html lang="en">
<head>
    <title>
      Bootstrap Booking Form
  </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script type = "text/JavaScript" src="https://MomentJS.com/downloads/moment.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/css/toastr.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/js/toastr.js"></script>

    <style>
    div h1 {
      color: red;
    }

    body {
    margin: 1rem;
    }
    #name-prompt {
    padding-top: 0.75rem;
    }
    #buttons {
    float: right;
    padding-right: 4rem;
    margin-top: -0.5rem;
  }

#buttons button {
    padding: 1rem 10rem;
}
#range {
    padding: 0;
}

.error {
  outline: 2px solid red;
}
    </style>
</head>
<body>
    <div class="fluid-container">
      <h1> <b> Bootstrap Booking Form:</b> </h1>
        <div class="row">
            <div class="col-sm-12">
                <div class="well">
                    Fill out the form and hit the submit button when complete...
                </div>
            </div>
        </div>
        <form>
            <div class="row">
                <div class="col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">User:</div>
                        <div class="panel-body" id="info">
                            <div class="row">
                                <div class="flex-column col-sm-2">
                                    <label class="control-label" for="username" id="name-prompt">Username:</label>
                                </div>
                                <div class="flex-column col-sm-10">
                                    <input class="form-control" type="text" id="username" placeholder="Type username..." value="">
                                </div>
                            </div>
                            <div class="row">
                                <div class="flex-column col-sm-2">
                                    <label class="control-label" for="first_name" id="name-prompt">First Name:</label>
                                </div>
                                <div class="flex-column col-sm-10">
                                    <input class="form-control" type="text" id="first_name" placeholder="Type first name..." value="">                                </div>
                            </div>
                            <div class="row">
                                <div class="flex-column col-sm-2">
                                    <label class="control-label" for="last_name" id="name-prompt">Last Name:</label>
                                </div>
                                <div class="flex-column col-sm-10">
                                    <input class="form-control" type="text" id="last_name" placeholder="Type last name..." value="">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading">Contact:</div>
                        <div class="panel-body">
                            <form class="form-horizontal">
                                <div class="input-group">
                                    <span class="input-group-addon" for="phone_number"><i class="fa-solid fa-phone"></i></span>
                                    <input class="form-control" type="text" id="phone_number" placeholder="Type phone#..."><br>
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon" for="fax_number"><i class="fa-solid fa-fax"></i></span>
                                    <input class="form-control" type="text" id="fax_number" placeholder="Type fax#..."><br>
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon" for="email"><i class="fa-sharp fa-solid fa-envelope"></i></span>
                                    <input class="form-control" type="text" id="email" placeholder="Type email...">
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="panel panel-primary">
                        <div class="panel-heading">Schedule:</div>
                        <div class="panel-body">
                            <div class="form-group">
                                <label for="adults">Adults:</label>
                                <select name="adults" class="form-control" id="adults" value=1>
                                    <option value=1>1</option>
                                </select>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="checkIn">Check-In:</label>
                                    <input class="form-control" type="date" id="checkIn" min="">
                                </div>
                                <div class="form-group">
                                    <label for="days">Days:</label>
                                    <input class="form-control" type="text" id="days" placeholder="Displays days..." value="" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="checkOut">Check-Out:</label>
                                    <input class="form-control" type="date" id="checkOut" min="">
                                </div>
                                <div class="form-group">
                                    <label for="cost">Cost($):</label>
                                    <input class="form-control" type="text" id="cost" placeholder="Displays cost..." value="" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">Other:</div>
                        <div class="panel-body">
                            <div class="form-group">
                                <label for="message">Message:</label>
                                <textarea class="form-control" type="text" id="message" rows=22 placeholder="Type message here..." value=""></textarea>
                            </div>
                            <div class="form-group">
                                <label for="range">Range:</label>
                                <input class="form-control" type="range" id="range" min="0" max="10" value="4" step="1" value=5>
                            </div>
                            <div class="form-group">
                                <input type="radio" id="low" value="low" name="priority" checked>
                                <label for="low">Low</label>
                                <input type="radio" id="med" value="med" name="priority">
                                <label for="low">Med</label>
                                <input type="radio" id="high" name="priority" value="high">
                                <label for="low">High</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="row">
            <div id="buttons">
                <button id="reset" class="btn btn-primary mb-2">
                    <i class="fa-solid fa-eraser"></i>
                    Reset
                </button>
                <button id="submit" class="btn btn-success mb-2" form="form">
                    <i class="fa-sharp fa-solid fa-paper-plane"></i>
                    Submit
                </button>
            </div>
        </div>
    </div>
    <script>
    let username = document.getElementById('username');
let firstName = document.getElementById('first_name');
let lastName = document.getElementById('last_name');

let phone = document.getElementById('phone_number');
let fax = document.getElementById('fax_number');
let email = document.getElementById('email');

let checkIn = document.getElementById('checkIn');
checkIn.min = moment(new Date()).format('YYYY-MM-DD');

let checkOut = document.getElementById('checkOut');
checkOut.min = moment(checkIn.min, 'YYYY-MM-DD').add(1, 'days').format('YYYY-MM-DD');

let days = document.getElementById("days");
let adults = document.getElementById("adults");
let cost = document.getElementById("cost");

let message = document.getElementById('message');


const inputs = [username, firstName, lastName, phone, fax, email, checkIn, checkOut, days, cost];
const names = ['Username', 'First Name', 'Last Name', 'Phone Number', 'Fax Number', 'Email Address', 'Check-In Date', 'Check-Out Date',
                    'Days', 'Cost']

let range = document.getElementById('range');
let low = document.getElementById('low');
let med = document.getElementById('med');
let high = document.getElementById('high');
let reset = document.getElementById('reset');
let submit = document.getElementById('submit')

for(let x = 2; x <= 10; x++) {
    adults.innerHTML += '<option value=' + x + '>' + x + '</option>';
}

checkIn.onchange = function() {
    checkOut.min = moment(checkIn.value, 'YYYY-MM-DD').add(1, 'days').format('YYYY-MM-DD');
    if (moment(checkIn.value, 'YYYY-MM-DD') > moment(checkOut.value, 'YYYY-MM-DD')) {
        checkOut.value = "";
    }
    if(checkOut.value != "") {
        days.value = moment(checkOut.value, 'YYYY-MM-DD').diff(moment(checkIn.value, 'YYYY-MM-DD'), 'days');
    }
    else {
        days.value = "";
        cost.value = "";
    }
    if(days.value != "") {
        cost.value = days.value * adults.value * 150;
    }
}

checkOut.onchange = function () {
    if (checkIn.value != "") {
        days.value = moment(checkOut.value, 'YYYY-MM-DD').diff(moment(checkIn.value, 'YYYY-MM-DD'), 'days');
    }
    if(days.value != "") {
        console.log(days.value);
        console.log(adults.value);
        cost.value = days.value * adults.value * 150;
    }
}

adults.onchange = function () {
    if(days.value != "") {
        cost.value = days.value * adults.value * 150;
    }
};

$('#reset').on('click', function() {
    for(let i = 0; i < inputs.length; i++) {
        inputs[i].value = "";
        inputs[i].parentElement.classList.remove('has-error');
    }
    adults.value = 1;
    range.value = 5;
    low.checked = true;
    med.checked = false;
    high.checked = false;
    toastr.info('Form has been reset successfully.');
});

$('#submit').on('click', function() {
    let counter = 0;
    for(let x = 0; x < inputs.length; x++) {
        if(inputs[x].value == "" & x!= 8 & x != 9) {
            if(x < 6 | x == 10) {
                inputs[x].parentElement.classList.add('has-error');
            }
            counter++;
            toastr.options = {
                "newestOnTop": false,
                "positionClass": "toast-top-right"
            }
            toastr.error('Error: ' + names[x] + ' has not filled in.');
        }
        else if(x < 6 | x == 10) {
            inputs[x].parentElement.classList.remove('has-error');
        }
    }
    if(cost.value < 0 | cost.value == "") {
        toastr.error('Error: Price must be positive.');
    }
    else if(counter == 0) {
        toastr.options = {
            "positionClass": "toast-top-right"
        }
        toastr.success('Form has been successfully submitted! Thank you.');
    }
});
</script>
</body>

</html>
